<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Apple of Fortune â€” Activation</title>
  <style>
    :root{
      --bg:#8b3f24; --btn:#550000; --btnH:#770000; --ok:#fffb99; --err:#ffdede;
      --card:rgba(255,255,255,0.08); --online:#a7ffb0;
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Kufi Arabic",sans-serif;
      background:var(--bg);color:#fff;display:flex;flex-direction:column;align-items:center;padding:20px;gap:16px;
    }
    .wrap{width:min(960px,100%);display:flex;flex-direction:column;gap:16px}
    .card{background:var(--card);padding:16px;border-radius:14px}
    .top{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .logo{height:38px}
    .online{font-weight:700;color:var(--online)}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .seg{display:flex;gap:8px}
    .seg button{
      padding:8px 12px;background:#ffffff10;border:1px solid #ffffff33;border-radius:10px;color:#fff;cursor:pointer
    }
    .seg button.active{background:#ffffff28;border-color:#ffffff77}
    .btn,button{
      padding:10px 14px;background:var(--btn);color:#fff;border:none;border-radius:10px;
      font-weight:700;font-size:15px;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;gap:8px
    }
    .btn:hover,button:hover{background:var(--btnH)}
    input#idInput{
      padding:12px 14px;font-size:16px;border-radius:10px;border:2px solid transparent;width:260px;text-align:center;outline:none
    }
    input#idInput.err{border-color:#ffb3b3;background:#3a0000}
    #errorMsg{color:var(--err);font-weight:700;min-height:22px}
    #successBox{display:none}
    #successMsg{
      color:var(--ok);font-weight:700;white-space:pre-line;border:1px dashed #fff4;padding:12px;border-radius:10px
    }
    .progress{width:100%;height:10px;background:#ffffff22;border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#ffd36a,#fff1a6);transition:width .25s ease}
    .meta{display:flex;justify-content:space-between;gap:12px;align-items:center}
    details{background:#00000022;padding:10px;border-radius:10px}
    summary{cursor:pointer;font-weight:700}
    .foot{opacity:.7;text-align:center;font-size:12px}

    /* Winners */
    .winners{display:grid;gap:10px}
    .winner-row{
      display:grid;grid-template-columns:1.2fr 0.9fr 0.9fr 0.9fr 1.1fr;gap:8px;align-items:center;
      background:#ffffff15;border:1px solid #ffffff22;border-radius:12px;padding:10px 12px
    }
    .winner-row b{white-space:nowrap}
    .w-head{opacity:.9;font-weight:800}
    .ticker{max-height:280px;overflow:hidden}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- HEADER -->
    <div class="card top">
      <div class="row">
        <img src="IMG_6957.PNG" alt="Apple of Fortune" class="logo">
        <div class="online">
          <span id="onlineLbl">Ù…ØªØµÙ„ÙˆÙ† Ø§Ù„Ø¢Ù†: </span><span id="onlineNum">27</span>
        </div>
      </div>
      <div class="row">
        <div class="seg" id="langSeg">
          <button data-lang="ar" class="active">AR</button>
          <button data-lang="en">EN</button>
        </div>
        <a id="tgBtnTop" class="btn" href="https://t.me/TELEGRAM_HANDLE" target="_blank" rel="noopener">ğŸ’¬ Ø¯Ø¹Ù… ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</a>
      </div>
    </div>

    <!-- AUTH / ACTIVATION -->
    <div class="card" id="authCard">
      <h2 id="title" style="margin:0 0 8px">1xbet Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ØªØ¹Ø±ÙŠÙ</h2>
      <div class="row" style="justify-content:center">
        <input type="text" id="idInput" placeholder="ID (1XBET)" maxlength="12" inputmode="numeric" />
        <button id="copyIdBtn" title="Copy/Ù†Ø³Ø®">ğŸ“‹</button>
      </div>
      <div class="row" style="justify-content:center">
        <button id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
        <a id="payBtn" class="btn" href="https://affpa.top/L?tag=d_4206914m_62287c_&site=4206914&ad=62287&r=registration" target="_blank" rel="noopener">ğŸ’³ Ø¯ÙØ¹</a>
        <button id="tgBtnMid">Telegram</button>
      </div>
      <div id="errorMsg"></div>

      <!-- SUCCESS ONLY -->
      <div id="successBox">
        <div class="meta" style="margin:6px 0 10px">
          <div class="progress"><div class="bar" id="bar"></div></div>
          <div class="sub"><span id="progressText">0%</span></div>
        </div>

        <div id="successMsg"></div>

        <div class="meta" style="margin-top:10px">
          <div class="sub">â³ <span id="leftTimeLbl">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</span>: <span id="countdown">15:00</span></div>
          <button id="copyPayBtn" title="Copy/Ù†Ø³Ø®">ğŸ“‹ <span id="copyPayLbl">Ù†Ø³Ø® Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª</span></button>
        </div>

        <div class="row" style="margin-top:8px;justify-content:center">
          <a class="btn" id="tgBtnBottom">âœ… <span id="openTgLbl">ÙØªØ­ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø§Ù„Ø¢Ù†</span></a>
          <a class="btn" id="payBtn2" href="https://affpa.top/L?tag=d_4206914m_62287c_&site=4206914&ad=62287&r=registration" target="_blank" rel="noopener">ğŸ’³ <span id="payNowLbl">Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¯ÙØ¹</span></a>
        </div>
      </div>
    </div>

    <!-- WINNERS -->
    <div class="card">
      <h3 id="winnersTitle" style="margin:0 0 8px">Ø§Ù„ÙØ§Ø¦Ø²ÙˆÙ† Ø§Ù„Ù…ØªØµÙ„ÙˆÙ† Ø§Ù„Ø¢Ù†</h3>
      <div class="winners">
        <div class="winner-row w-head" id="wHead">
          <div id="hName">Ø§Ù„Ø§Ø³Ù…</div>
          <div id="hCountry">Ø§Ù„Ø¯ÙˆÙ„Ø©</div>
          <div id="hCity">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</div>
          <div id="hDeposit">Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</div>
          <div id="hEarnings">Ø§Ù„Ø±Ø¨Ø­ (Ù…Ø­Ù„ÙŠ)</div>
        </div>
        <div class="ticker" id="wTicker"></div>
      </div>
    </div>

    <!-- FAQ -->
    <div class="card">
      <details>
        <summary id="faq1">Ù„Ù…Ø§Ø°Ø§ Ù†Ø·Ù„Ø¨ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø±ØµÙŠØ¯ØŸ</summary>
        <div class="sub" id="faq1txt">Ø§Ù„ØªØ¹Ø¨Ø¦Ø© Ø¶Ø±ÙˆØ±ÙŠØ© Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ø´Ø§Ø±Ø§Øª. Ø¨Ø¹Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</div>
      </details>
      <details>
        <summary id="faq2">ÙƒÙ… ÙŠØ³ØªØºØ±Ù‚ Ø§Ù„ØªÙØ¹ÙŠÙ„ØŸ</summary>
        <div class="sub" id="faq2txt">Ø¹Ø§Ø¯Ø©Ù‹ ÙÙˆØ±ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹. ÙÙŠ Ø­Ø§Ù„Ø§Øª Ù†Ø§Ø¯Ø±Ø© Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ Ø­ØªÙ‰ 5 Ø¯Ù‚Ø§Ø¦Ù‚.</div>
      </details>
    </div>

    <div class="foot" id="foot">Â© 2025 â€” Activation Center</div>
  </div>

  <script>
    // ===== Config =====
    const TELEGRAM_URL = "https://t.me/TELEGRAM_HANDLE"; // Ğ—ĞĞœĞ•ĞĞ˜
    const PAY_URL = "https://affpa.top/L?tag=d_4206914m_62287c_&site=4206914&ad=62287&r=registration";
    const COUNTDOWN_START_SEC = 15 * 60;

    // ĞšÑƒÑ€ÑÑ‹ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ñ‹Ğµ â€” Ğ¿Ñ€Ğ°Ğ²ÑŒ Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸)
    const RATES = { USD_EGP: 50, USD_MAD: 10, USD_MRU: 40 };

    // i18n
    const I18N = {
      ar: {
        dir:"rtl", online:"Ù…ØªØµÙ„ÙˆÙ† Ø§Ù„Ø¢Ù†: ", title:"1xbet Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ØªØ¹Ø±ÙŠÙ", login:"Ø¯Ø®ÙˆÙ„",
        pay:"ğŸ’³ Ø¯ÙØ¹", payNow:"Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¯ÙØ¹", left:"Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ", copyInst:"Ù†Ø³Ø® Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª",
        openTg:"ÙØªØ­ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø§Ù„Ø¢Ù†",
        winnersTitle:"Ø§Ù„ÙØ§Ø¦Ø²ÙˆÙ† Ø§Ù„Ù…ØªØµÙ„ÙˆÙ† Ø§Ù„Ø¢Ù†",
        hName:"Ø§Ù„Ø§Ø³Ù…", hCountry:"Ø§Ù„Ø¯ÙˆÙ„Ø©", hCity:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", hDeposit:"Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹", hEarnings:"Ø§Ù„Ø±Ø¨Ø­ (Ù…Ø­Ù„ÙŠ)",
        faq1:"Ù„Ù…Ø§Ø°Ø§ Ù†Ø·Ù„Ø¨ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø±ØµÙŠØ¯ØŸ",
        faq1txt:"Ø§Ù„ØªØ¹Ø¨Ø¦Ø© Ø¶Ø±ÙˆØ±ÙŠØ© Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ø´Ø§Ø±Ø§Øª. Ø¨Ø¹Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.",
        faq2:"ÙƒÙ… ÙŠØ³ØªØºØ±Ù‚ Ø§Ù„ØªÙØ¹ÙŠÙ„ØŸ",
        faq2txt:"Ø¹Ø§Ø¯Ø©Ù‹ ÙÙˆØ±ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹. ÙÙŠ Ø­Ø§Ù„Ø§Øª Ù†Ø§Ø¯Ø±Ø© Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ Ø­ØªÙ‰ 5 Ø¯Ù‚Ø§Ø¦Ù‚.",
        allText:
`Ù„Ù„Ù…ØºØ±Ø¨: ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© 65 Ø¯Ø±Ù‡Ù… (MAD) Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©
Ù„Ù…ØµØ±: ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© 240 Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ (EGP) Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©
Ù„Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§: ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© 1900 Ø£ÙˆÙ‚ÙŠØ© Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ© (MRU) Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©`
      },
      en: {
        dir:"ltr", online:"Online now: ", title:"Enter your 1xBet ID", login:"Login",
        pay:"ğŸ’³ Pay", payNow:"Go to payment", left:"Time left", copyInst:"Copy instructions",
        openTg:"Open Telegram now",
        winnersTitle:"Online winners",
        hName:"Name", hCountry:"Country", hCity:"City", hDeposit:"Deposit", hEarnings:"Earnings (local)",
        faq1:"Why do we require a top-up?",
        faq1txt:"A top-up is required to activate signal access. After activation, signals arrive automatically.",
        faq2:"How long does activation take?",
        faq2txt:"Usually instant after payment. In rare cases up to 5 minutes.",
        allText:
`For Morocco: please top up 65 MAD to continue
For Egypt: please top up 240 EGP to continue
For Mauritania: please top up 1900 MRU to continue`
      }
    };

    // ===== Elements (Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾) =====
    const onlineLbl = document.getElementById('onlineLbl');
    const onlineNum = document.getElementById('onlineNum');
    const langSeg = document.getElementById('langSeg');
    const title = document.getElementById('title');
    const idInput = document.getElementById('idInput');
    const copyIdBtn = document.getElementById('copyIdBtn');
    const loginBtn = document.getElementById('loginBtn');
    const payBtn = document.getElementById('payBtn');
    const payBtn2 = document.getElementById('payBtn2');
    const tgBtnMid = document.getElementById('tgBtnMid');
    const tgBtnBottom = document.getElementById('tgBtnBottom');
    const tgBtnTop = document.getElementById('tgBtnTop');

    const errorMsg = document.getElementById('errorMsg');
    const successBox = document.getElementById('successBox');
    const successMsg = document.getElementById('successMsg');
    const bar = document.getElementById('bar');
    const progressText = document.getElementById('progressText');
    const countdownEl = document.getElementById('countdown');
    const copyPayBtn = document.getElementById('copyPayBtn');
    const leftTimeLbl = document.getElementById('leftTimeLbl');
    const copyPayLbl = document.getElementById('copyPayLbl');
    const openTgLbl = document.getElementById('openTgLbl');

    // Winners
    const winnersTitle = document.getElementById('winnersTitle');
    const hName = document.getElementById('hName');
    const hCountry = document.getElementById('hCountry');
    const hCity = document.getElementById('hCity');
    const hDeposit = document.getElementById('hDeposit');
    const hEarnings = document.getElementById('hEarnings');
    const wTicker = document.getElementById('wTicker');

    // ===== State =====
    let currentLang = localStorage.getItem('lang') || 'ar';
    let countdownTimer = null, progressTimer = null;

    // ===== Data =====
    const CITIES = {
      MR: ["Ù†ÙˆØ§ÙƒØ´ÙˆØ·","Ù†ÙˆØ§Ø°ÙŠØ¨Ùˆ","Ø£Ø·Ø§Ø±","Ø±ÙˆØµÙˆ","ÙƒÙŠÙÙ‡","Ø³ÙŠÙ„Ø¨Ø§Ø¨ÙŠ"],
      EG: ["Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©","Ø§Ù„Ø¬ÙŠØ²Ø©","Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©","Ø·Ù†Ø·Ø§","Ø§Ù„Ù…Ù†ØµÙˆØ±Ø©","Ø£Ø³ÙŠÙˆØ·"],
      MA: ["Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡","Ø§Ù„Ø±Ø¨Ø§Ø·","Ù…Ø±Ø§ÙƒØ´","ÙØ§Ø³","Ø·Ù†Ø¬Ø©","Ø£ØºØ§Ø¯ÙŠØ±"]
    };
    const FIRST = ["Ø£Ø­Ù…Ø¯","Ù…Ø­Ù…Ø¯","Ø³Ø§Ù„Ù…","ÙŠÙˆØ³Ù","Ø¹Ù…Ø±","Ø³Ø§Ù…ÙŠ","Ø­Ù…Ø²Ø©","Ø¥Ù„ÙŠØ§Ø³","Ø·Ø§Ø±Ù‚","Ù…Ø±ÙˆØ§Ù†","Ù‡Ø§Ø´Ù…","Ø²ÙŠØ¯"];
    const LAST  = ["Ø§Ù„Ø¹Ù„ÙˆÙŠ","Ø§Ù„Ø´Ù†Ù‚ÙŠØ·ÙŠ","Ø§Ù„Ù…ØµØ±ÙŠ","Ø§Ù„ÙØ§Ø³ÙŠ","Ø§Ù„Ø±Ø¨Ø§Ø·ÙŠ","Ø§Ù„ØªÙ…Ø¨ÙƒØªÙŠ","Ø§Ù„Ù‚Ø§Ù‡Ø±ÙŠ","Ø§Ù„Ù…Ø±Ø§ÙƒØ´ÙŠ","Ø§Ù„Ø£Ù†ØµØ§Ø±ÙŠ","Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…","Ø§Ù„Ø­Ø³Ù†ÙŠ","Ø§Ù„Ù…Ø®ØªØ§Ø±"];

    // ===== Init =====
    applyLang(currentLang);
    onlinePulse(); setInterval(onlinePulse, 5000);
    const savedId = localStorage.getItem('id'); if(savedId) idInput.value = savedId;
    seedWinners(); setInterval(rotateWinners, 2200);

    // ===== Handlers =====
    langSeg.addEventListener('click', (e)=>{
      const b = e.target.closest('button'); if(!b) return;
      currentLang = b.dataset.lang;
      localStorage.setItem('lang', currentLang);
      langSeg.querySelectorAll('button').forEach(x=>x.classList.toggle('active', x.dataset.lang===currentLang));
      applyLang(currentLang);
    });

    copyIdBtn.addEventListener('click', ()=>{
      const val=idInput.value.trim(); if(!val){pulse(idInput);return;}
      safeCopy(val, currentLang==='ar'?'ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…':'Copied âœ…');
    });

    tgBtnMid.addEventListener('click', openTelegram);
    tgBtnBottom.addEventListener('click', openTelegram);

    loginBtn.addEventListener('click', verificarID);
    idInput.addEventListener('keydown',(e)=>{ if(e.key==='Enter') verificarID(); });

    copyPayBtn.addEventListener('click', ()=>{
      safeCopy(I18N[currentLang].allText, currentLang==='ar'?'ØªÙ… Ù†Ø³Ø® Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª âœ…':'Instructions copied âœ…');
    });

    // ===== Functions =====
    function applyLang(lang){
      const t = I18N[lang];
      document.documentElement.lang = lang;
      document.documentElement.dir  = t.dir;
      if (onlineLbl) onlineLbl.textContent = t.online;
      if (title) title.textContent    = t.title;
      if (loginBtn) loginBtn.textContent = t.login;
      if (payBtn) { payBtn.textContent = t.pay; payBtn.href = PAY_URL; }
      if (payBtn2) { payBtn2.querySelector('span').textContent = t.payNow; payBtn2.href = PAY_URL; }
      if (leftTimeLbl) leftTimeLbl.textContent = t.left;
      if (copyPayLbl) copyPayLbl.textContent  = t.copyInst;
      if (openTgLbl) openTgLbl.textContent   = t.openTg;
      if (winnersTitle) winnersTitle.textContent= t.winnersTitle;
      if (hName) hName.textContent = t.hName;
      if (hCountry) hCountry.textContent = t.hCountry;
      if (hCity) hCity.textContent = t.hCity;
      if (hDeposit) hDeposit.textContent = t.hDeposit;
      if (hEarnings) hEarnings.textContent = t.hEarnings;
      const f1=document.getElementById('faq1'), f1t=document.getElementById('faq1txt'),
            f2=document.getElementById('faq2'), f2t=document.getElementById('faq2txt');
      if (f1) f1.textContent = t.faq1; if (f1t) f1t.textContent = t.faq1txt;
      if (f2) f2.textContent = t.faq2; if (f2t) f2t.textContent = t.faq2txt;
      if (tgBtnTop) tgBtnTop.textContent = (lang==='ar'?'ğŸ’¬ Ø¯Ø¹Ù… ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…':'ğŸ’¬ Telegram support');
      if (successMsg) successMsg.textContent = t.allText;
    }

    function verificarID(){
      const id = idInput.value.trim();
      const valid = /^\d{6,12}$/.test(id);
      localStorage.setItem('id', id);

      if(valid){
        idInput.classList.remove('err'); errorMsg.textContent = '';
        successBox.style.display = 'block';
        startProgress(); startCountdown(COUNTDOWN_START_SEC);
        successBox.scrollIntoView({behavior:'smooth', block:'center'});
      }else{
        successBox.style.display = 'none';
        errorMsg.textContent = (currentLang==='ar'?'Ø±Ù‚Ù… ØªØ¹Ø±ÙŠÙ ØºÙŠØ± ØµØ§Ù„Ø­':'Invalid ID');
        idInput.classList.add('err'); pulse(idInput);
      }
    }

    function startProgress(){
      clearInterval(progressTimer);
      let p=0; progressText.textContent='0%'; bar.style.width='0%';
      progressTimer=setInterval(()=>{
        p=Math.min(100, p + Math.floor(Math.random()*9)+3);
        bar.style.width=p+'%'; progressText.textContent=p+'%';
        if(p>=100) clearInterval(progressTimer);
      },500);
    }

    function startCountdown(total){
      clearInterval(countdownTimer);
      let t=total; renderCountdown(t);
      countdownTimer=setInterval(()=>{
        t--; renderCountdown(t);
        if(t<=0) clearInterval(countdownTimer);
      },1000);
    }
    function renderCountdown(t){
      const m=String(Math.floor(t/60)).padStart(2,'0');
      const s=String(t%60).padStart(2,'0');
      countdownEl.textContent=`${m}:${s}`;
    }

    function openTelegram(){ window.open(TELEGRAM_URL, '_blank'); }

    function onlinePulse(){
      const base = 21 + Math.floor(Math.random()*20);
      if (onlineNum) onlineNum.textContent = String(base);
    }
    function pulse(el){
      if (!el || !el.animate) return;
      el.animate([{transform:'scale(1)'},{transform:'scale(1.04)'},{transform:'scale(1)'}],{duration:260});
    }
    function toast(text){
      const t=document.createElement('div');
      t.textContent=text;
      Object.assign(t.style,{
        position:'fixed',bottom:'16px',left:'50%',transform:'translateX(-50%)',
        background:'#000000aa',color:'#fff',padding:'10px 14px',borderRadius:'10px',
        zIndex:9999,fontWeight:700
      });
      document.body.appendChild(t);
      setTimeout(()=>t.remove(),1400);
    }
    async function safeCopy(text, okMsg){
      try{
        if (navigator.clipboard && window.isSecureContext){
          await navigator.clipboard.writeText(text);
          toast(okMsg);
        }else{
          const ta=document.createElement('textarea');
          ta.value=text; ta.style.position='fixed'; ta.style.opacity='0';
          document.body.appendChild(ta); ta.focus(); ta.select();
          document.execCommand('copy'); document.body.removeChild(ta);
          toast(okMsg);
        }
      }catch(e){ console.warn('Copy failed', e); }
    }

    // ===== Winners =====
    function usdToLocal(country, usd){
      if(country==="MR") return Math.round(usd*RATES.USD_MRU) + " MRU";
      if(country==="EG") return Math.round(usd*RATES.USD_EGP) + " EGP";
      return Math.round(usd*RATES.USD_MAD) + " MAD";
    }
    function makeWinner(country){
      const first = FIRST[Math.floor(Math.random()*FIRST.length)];
      const last  = LAST[Math.floor(Math.random()*LAST.length)];
      const cityA = CITIES[country]; const city  = cityA[Math.floor(Math.random()*cityA.length)];
      let depositLocal;
      if(country==="MR"){ depositLocal = (Math.floor(Math.random()*8)+5)*100 + " MRU"; }
      else if(country==="EG"){ depositLocal = (Math.floor(Math.random()*10)+3)*100 + " EGP"; }
      else{ depositLocal = (Math.floor(Math.random()*4)+1)*100 + " MAD"; }
      const earnUSD = 150 + Math.floor(Math.random()*151);
      const earnLocal = usdToLocal(country, earnUSD);
      return {
        name: `${first} ${last}`,
        country: country==="MR"?"Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§":country==="EG"?"Ù…ØµØ±":"Ø§Ù„Ù…ØºØ±Ø¨",
        city, deposit: depositLocal, earnings: earnLocal
      };
    }
    function buildWinnerRow(w){
      const row = document.createElement('div');
      row.className='winner-row';
      row.innerHTML = `
        <div><b>${w.name}</b></div>
        <div>${w.country}</div>
        <div>${w.city}</div>
        <div>${w.deposit}</div>
        <div><b>${w.earnings}</b></div>
      `;
      return row;
    }
    function seedWinners(){
      if (!wTicker) return;
      wTicker.innerHTML='';
      const countries = ["MR","EG","MA","MR","EG","MA","MR","EG"];
      for (let i=0;i<countries.length;i++){
        wTicker.appendChild(buildWinnerRow(makeWinner(countries[i])));
      }
    }
    function rotateWinners(){
      if (!wTicker || !wTicker.firstElementChild) return;
      const first = wTicker.firstElementChild;
      first.animate([{opacity:1,transform:'translateY(0)'},{opacity:0,transform:'translateY(-8px)'}],{duration:260});
      setTimeout(()=>{
        if (first.parentNode) first.parentNode.removeChild(first);
        const cc = ["MR","EG","MA"][Math.floor(Math.random()*3)];
        wTicker.appendChild(buildWinnerRow(makeWinner(cc)));
      },260);
    }
  </script>
</body>
</html>
